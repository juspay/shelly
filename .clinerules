# @juspay/shelly Project Rules

### **MIGRATION PATTERNS**
- **Dual CLI Architecture**: Node.js with extensible command processing for Error Analysis and Repository Organization
- **AI Integration Enhancement**: Neurolink and Google AI services for intelligent content generation and command analysis
- **Memory Bank Evolution**: Persistent AI context management with structured documentation for development continuity

> **ğŸ“š Historical Learning Archive**: See `memory-bank/` for complete project context and AI assistant guidance
> **ğŸ¯ Current Focus**: AI-powered development assistant combining error analysis, repository organization, and Memory Bank for enhanced AI-assisted development workflows

---

## ğŸ—ï¸ ARCHITECTURE PATTERNS (CRITICAL)

### **Core Module Structure**
```javascript
@juspay/shelly/
â”œâ”€â”€ package.json                 # Package metadata with @juspay/ scoping
â”œâ”€â”€ README.md                    # Comprehensive feature documentation
â”œâ”€â”€ src/                         # Main application source
â”‚   â”œâ”€â”€ main.js                  # Primary CLI - Error Analysis Engine
â”‚   â”œâ”€â”€ services/                # Core services layer
â”‚   â”‚   â”œâ”€â”€ analysisService.js   # AI-powered command analysis
â”‚   â”‚   â”œâ”€â”€ historyService.js    # Shell history integration
â”‚   â”‚   â”œâ”€â”€ commandService.js    # Command processing
â”‚   â”‚   â”œâ”€â”€ fileService.js       # File operations
â”‚   â”‚   â”œâ”€â”€ shellService.js      # Shell compatibility layer
â”‚   â”‚   â”œâ”€â”€ uiService.js         # User interface
â”‚   â”‚   â””â”€â”€ ruleService.js       # Rule-based processing
â”‚   â”œâ”€â”€ shelly/                  # Secondary CLI system
â”‚   â”‚   â”œâ”€â”€ cli.js               # Repository Organization & Memory Bank CLI
â”‚   â”‚   â”œâ”€â”€ commands/            # Command implementations
â”‚   â”‚   â”‚   â”œâ”€â”€ organize.js      # Project scaffolding & GitHub integration
â”‚   â”‚   â”‚   â””â”€â”€ memory.js        # Memory Bank management
â”‚   â”‚   â”œâ”€â”€ services/            # Shelly-specific services
â”‚   â”‚   â”‚   â””â”€â”€ memoryBankService.js  # AI context management
â”‚   â”‚   â”œâ”€â”€ templates/           # Project templates and scaffolding
â”‚   â”‚   â””â”€â”€ utils/               # Utility functions
â”‚   â”‚       â””â”€â”€ aiContentGenerator.js  # AI-powered content generation
â”‚   â””â”€â”€ utils/                   # Shared utilities
â”‚       â””â”€â”€ commandFinder.js     # Command discovery
â”œâ”€â”€ test/                        # Test suites
â”œâ”€â”€ docs/                        # Documentation
â”‚   â”œâ”€â”€ API.md                   # CLI and programmatic API reference
â”‚   â”œâ”€â”€ QUICK_START.md           # Multi-feature getting started guide
â”‚   â”œâ”€â”€ GETTING_STARTED.md       # Detailed setup instructions
â”‚   â””â”€â”€ SETUP.md                 # Installation and configuration
â”œâ”€â”€ memory-bank/                 # AI assistant context management
â”‚   â”œâ”€â”€ project/                 # Project strategy and goals
â”‚   â”œâ”€â”€ technical/               # Architecture and system patterns
â”‚   â””â”€â”€ current/                 # Active work and progress
â””â”€â”€ .github/                     # GitHub integration templates and workflows
```

### **Key Implementation Principles**
- **Dual CLI Architecture**: Separation of concerns between Error Analysis (main.js) and Repository Organization/Memory Bank (shelly/cli.js)
- **Service-Oriented Design**: Modular services for analysis, history, file operations, and AI integration
- **Shell Compatibility**: Universal support for bash, zsh, tcsh with graceful fallbacks
- **AI-First Development**: Integrated AI content generation and persistent context management
- **Cross-Platform Reliability**: macOS and Linux compatibility with robust error handling

### **Component Relationships**
```
Error Analysis Flow:
Shell History â†’ History Service â†’ Analysis Service â†’ AI Integration â†’ User Interface

Repository Organization Flow:
Project Analysis â†’ Template System â†’ GitHub Integration â†’ File Organization â†’ Memory Bank

Memory Bank Flow:
Project Context â†’ AI Content Generator â†’ Structured Documentation â†’ Cline Integration
```

---

## ğŸ› ï¸ ENTERPRISE DEVELOPMENT WORKFLOW

### **Universal Commands (Always Available)**

#### **Package Management**
```bash
npm install                 # Install dependencies
npm update                  # Update dependencies
npm audit                   # Security audit
npm run                     # Show available scripts
```

#### **Universal Development Commands**
```bash
npm start                   # Start application
npm test                    # Run tests
npm run build              # Build for production
npm run dev                # Development mode
npm run lint               # Code linting
npm run format             # Code formatting
```

#### **Git Workflow**
```bash
git status                  # Check status
git add .                   # Stage changes
git commit -m "message"     # Commit changes
git push                    # Push to remote
git pull                    # Pull from remote
```

#### **Shelly-Specific Commands**
```bash
# Error Analysis
shelly                      # Analyze last failed command with AI suggestions
shelly --alias             # Set up shell integration alias
shelly --version           # Show version information

# Repository Organization
shelly organize            # Enhance current project with full scaffolding
shelly organize --force    # Overwrite existing files during organization
shelly organize --update   # Preserve existing files, add missing ones
shelly organize --move     # Intelligently relocate misplaced files
shelly status             # Check repository organization health
shelly init <project>     # Create new project with complete setup

# Memory Bank Management
shelly memory init        # Initialize Memory Bank with AI-generated content
shelly memory update      # Refresh Memory Bank with current project state
shelly memory show <file> # Display specific Memory Bank file
shelly memory status      # Check Memory Bank completeness
shelly memory list        # List all Memory Bank files
```

---

## ğŸ”§ COMPLETE SDLC CYCLE

### **Phase 1: Setup & Dependencies**
```bash
# 1. Install Shelly globally
npm install -g @juspay/shelly

# 2. Clone and setup project
git clone https://github.com/juspay/shelly.git
cd shelly
npm install

# 3. Environment setup for AI features
cp .env.example .env
# Add your Google AI API key or Vertex AI credentials
export GOOGLE_AI_API_KEY=your_api_key_here
```

### **Phase 2: Development**
```bash
# 1. Set up shell integration
shelly --alias
source ~/.bashrc  # or ~/.zshrc

# 2. Initialize project organization (if working on existing project)
shelly organize

# 3. Set up Memory Bank for AI assistance
shelly memory init

# 4. Code quality checks
npm run lint
npm run format
```

### **Phase 3: Pre-Commit**
```bash
# 1. Quality assurance
npm run lint && npm run format && npm test

# 2. Update Memory Bank with latest changes
shelly memory update

# 3. Validate repository organization
shelly status
```

### **Phase 4: Testing & Validation**
```bash
# 1. Test all Shelly features
node src/main.js --version
node src/shelly/cli.js --help

# 2. Test Error Analysis
echo "test_command_that_fails" && shelly

# 3. Test Repository Organization
mkdir test-project && cd test-project
npm init -y
shelly organize
shelly status

# 4. Test Memory Bank
shelly memory init
shelly memory status
```

### **Phase 5: Release**
```bash
# 1. Update Memory Bank for release
shelly memory update

# 2. Version bump with semantic release
npm run semantic-release

# 3. Verify package publication
npm view @juspay/shelly version
```

---

## ğŸ§ª TESTING & DEBUGGING STRATEGY

### **Testing Architecture**
```
Layer 1: Unit Tests â†’ Service layer testing (analysisService, memoryBankService)
Layer 2: Integration Tests â†’ CLI command testing, shell integration validation
Layer 3: E2E Tests â†’ Complete workflows (organize â†’ memory init â†’ status)
```

### **Shelly Testing Commands**
```bash
# Basic testing
npm test                    # Run all tests
npm run test:watch         # Watch mode for development
npm run test:coverage      # Coverage report

# Debugging Shelly features
SHELLY_DEBUG=true shelly   # Debug mode for error analysis
node --inspect src/main.js # Debug main CLI
node --inspect src/shelly/cli.js organize --debug  # Debug organize command
```

### **Feature-Specific Testing**
```bash
# Error Analysis testing
shelly --version          # Basic functionality test
echo "invalid_command" && shelly  # Error analysis test

# Repository Organization testing
shelly organize --dry-run # Preview changes without applying
shelly status --verbose   # Detailed organization status

# Memory Bank testing
shelly memory status      # Check Memory Bank health
shelly memory show progress.md  # View specific files
```

---

## ğŸ” ENVIRONMENT & CONFIGURATION

### **Environment Variables**
```bash
# AI Integration
GOOGLE_AI_API_KEY=your_api_key                    # Google AI Studio (free tier)
GOOGLE_VERTEX_PROJECT=your_project_id             # Google Vertex AI (enterprise)
NEUROLINK_API_KEY=your_neurolink_key              # Neurolink integration

# Shelly Configuration
SHELLY_DEBUG=true                                 # Enable debug logging
SHELLY_DISABLE_AI=true                           # Disable AI features for testing
NODE_ENV=development                             # Development environment
```

### **Configuration Files**
```bash
# Core configuration
.env                      # Environment variables for AI services
package.json             # Project metadata and dependencies
.eslintrc.js             # Code linting configuration
.prettierrc              # Code formatting rules
commitlint.config.js     # Commit message validation

# Shelly-specific config
.clinerules              # This file - AI assistant instructions
memory-bank/             # AI context and project knowledge
.github/                 # GitHub integration templates and workflows
```

---

## ğŸ“– DOCUMENTATION & RESOURCES

### **Project Documentation Structure**
```
shelly/
â”œâ”€â”€ README.md              # Complete feature overview and usage
â”œâ”€â”€ CHANGELOG.md           # Version history and feature additions
â”œâ”€â”€ CONTRIBUTING.md        # Contribution guidelines for all features
â”œâ”€â”€ docs/                  # Comprehensive documentation
â”‚   â”œâ”€â”€ API.md            # CLI and programmatic API reference
â”‚   â”œâ”€â”€ QUICK_START.md    # Multi-feature getting started guide
â”‚   â”œâ”€â”€ GETTING_STARTED.md # Detailed setup instructions
â”‚   â””â”€â”€ SETUP.md          # Installation and configuration
â””â”€â”€ memory-bank/          # AI assistant context management
    â”œâ”€â”€ project/          # Project strategy and goals
    â”œâ”€â”€ technical/        # Architecture and system patterns
    â””â”€â”€ current/          # Active work and progress
```

### **Key Resources**
- **Project Repository**: https://github.com/juspay/shelly
- **Documentation**: https://juspay.github.io/shelly/
- **Issue Tracker**: https://github.com/juspay/shelly/issues
- **NPM Package**: https://www.npmjs.com/package/@juspay/shelly
- **AI Integration**: Neurolink platform and Google AI services

---

## ğŸ’» DEVELOPMENT STANDARDS

### **Code Organization**
```javascript
// Shelly service architecture
src/
â”œâ”€â”€ main.js                    // Primary CLI entry point
â”œâ”€â”€ services/                  // Core service layer
â”‚   â”œâ”€â”€ analysisService.js    // AI-powered command analysis
â”‚   â”œâ”€â”€ historyService.js     // Shell history integration
â”‚   â””â”€â”€ shellService.js       // Multi-shell compatibility
â”œâ”€â”€ shelly/                   // Secondary CLI system
â”‚   â”œâ”€â”€ cli.js               // Repository organization CLI
â”‚   â”œâ”€â”€ commands/            // Feature-specific commands
â”‚   â”‚   â”œâ”€â”€ organize.js      // Project scaffolding
â”‚   â”‚   â””â”€â”€ memory.js        // Memory Bank management
â”‚   â””â”€â”€ services/            // Specialized services
â”‚       â””â”€â”€ memoryBankService.js  // AI context management
â””â”€â”€ utils/                   // Shared utilities
    â””â”€â”€ commandFinder.js     // Cross-platform command discovery
```

### **Coding Standards**
```javascript
// Shelly service pattern example
const createAnalysisService = (config = {}) => {
  const { aiProvider = 'neurolink', debugMode = false } = config;
  
  return {
    async analyzeCommand(command, context) {
      // AI-powered command analysis implementation
      return await processWithAI(command, context, aiProvider);
    },
    
    async generateSuggestions(errorOutput, history) {
      // Context-aware suggestion generation
      return await createSuggestions(errorOutput, history);
    }
  };
};
```

---

## âš¡ SUCCESS FACTORS

### **Quality Metrics**
- **Error Analysis Accuracy**: >90% helpful suggestion rate
- **Repository Organization Success**: 100% for standard project types
- **Memory Bank Generation**: Complete context coverage
- **Cross-Platform Compatibility**: macOS and Linux support
- **AI Integration Reliability**: Graceful fallback when AI unavailable

### **Performance Targets**
- **Command Analysis Response**: <2 seconds for most commands
- **Repository Organization**: <30 seconds for typical projects
- **Memory Bank Generation**: <60 seconds for comprehensive context
- **Shell Integration Latency**: <100ms for history access

### **Validation Pipeline**
```bash
# Complete Shelly validation
npm install && npm run lint && npm test && npm run build

# Feature-specific validation
shelly --version && shelly organize --dry-run && shelly memory status
```

---

## ğŸ¯ WORKING EXAMPLES

### **Basic Usage**
```bash
# Install and setup
npm install -g @juspay/shelly
shelly --alias

# Error analysis
some_command_that_fails
shelly  # Get AI-powered suggestions

# Repository organization
cd your-project
shelly organize
shelly status
```

### **Advanced Usage**
```bash
# Complete project setup workflow
shelly init my-new-project --template typescript
cd my-new-project
shelly memory init
shelly organize --force
shelly status

# Memory Bank management
shelly memory update --file progress.md
shelly memory show systemPatterns.md
```

### **Common Workflows**
```bash
# Daily development workflow
# 1. Use error analysis when commands fail
git push origin main  # fails
shelly  # get suggestions and fix

# 2. Organize new projects
shelly organize --update  # add missing files without overwriting

# 3. Keep Memory Bank current
shelly memory update  # refresh AI context

# 4. Check repository health
shelly status  # validate organization completeness
```

---

**ğŸ¯ SHELLY IMPLEMENTATION COMPLETE**: 
This .clinerules file now provides complete context for AI assistants working with Shelly. All placeholders have been replaced with actual Shelly-specific information including:

1. âœ… Dual CLI architecture (Error Analysis + Repository Organization + Memory Bank)
2. âœ… Complete command reference for all features
3. âœ… AI integration patterns and environment setup
4. âœ… Testing strategies for all components
5. âœ… Real project structure and coding standards

**ğŸ“ AI ASSISTANT GUIDANCE**: Use this comprehensive context to understand Shelly's architecture, provide accurate suggestions for development tasks, and maintain consistency with the established patterns for Error Analysis, Repository Organization, and Memory Bank features.
